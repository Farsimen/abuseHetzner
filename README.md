# Improved Abuse Defender

اسکریپت پیشرفته برای مدیریت فایروال و جلوگیری از abuse (سوءاستفاده) در سرورهای Hetzner، با تمرکز روی سازگاری با شبکه‌های ایران. این اسکریپت از ipset برای کارایی بالا استفاده می‌کند و شامل منو برای نصب، شخصی‌سازی و مدیریت rules است.

## کاربردهای کلیدی
- **جلوگیری از abuse**: بلاک ترافیک خروجی به IPهای مخرب (مانند netscan یا اسپم) برای جلوگیری از بن شدن اکانت Hetzner.
- **Whitelist اتوماتیک**: اضافه کردن رنج IPهای ایرانی (از RIPE) و Hetzner برای حفظ اتصالات داخلی و جلوگیری از بلاک ناخواسته (مثل پروکسی 3x-ui).
- **مدیریت آسان**: منو برای بلاک دستی، نمایش rules، تست موقتی، غیرفعال کردن و پاک کردن کامل.
- **پایداری بالا**: auto-update لیست abuse هر ۲۴ ساعت، لاگ‌گیری با rotation و سازگاری با ufw – مناسب برای VPSهای ایرانی بدون کندی.

## نصب اتوماتیک
برای نصب مستقیم از گیتهاب، دستور زیر را در ترمینال اوبونتو اجرا کنید (نیاز به root دارد):

```
bash <(curl -s https://raw.githubusercontent.com/Farsimen/abuseHetzner/main/abuse-defender.sh)
```

- بعد از اجرا، منو ظاهر می‌شود. گزینه ۱ را برای نصب و بلاک abuse انتخاب کنید.
- وابستگی‌ها (مانند iptables و ipset) اتوماتیک نصب می‌شوند.

## استفاده
- منو را دنبال کنید: گزینه ۱ برای نصب، ۲ برای whitelist ایران، ۵ برای شخصی‌سازی و غیره.
- برای چک rules: `ipset list` و `iptables -L improved-abuse -v -n`.

## هشدار
- قبل از اجرا، محتوای اسکریپت را چک کنید.
- اگر با 3x-ui یا ufw تداخل داشت، گزینه ۸ (Clear All) را بزنید.
- برای سؤالات، به repo مراجعه کنید یا ایمیل بزنید.

این اسکریپت برای پایداری بلندمدت طراحی شده – موفق باشید! 😊
